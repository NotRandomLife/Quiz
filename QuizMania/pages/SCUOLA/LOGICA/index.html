<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<title>Logica</title>
<style>

body{margin:0;font-family:sans-serif;background:#0f172a;color:white;text-align:center;padding:20px;}
.quiz-container{max-width:900px;margin:0 auto;background:#020617;border-radius:20px;box-shadow:0 0 25px rgba(0,0,0,0.6);padding:20px;}
.question{font-size:1.4rem;margin-bottom:20px;}
.options{display:flex;flex-direction:column;gap:10px;margin-bottom:20px;}
.opt-btn{padding:12px 16px;border-radius:12px;border:0;background:#1e293b;color:white;cursor:pointer;font-size:1rem;text-align:left;}
.opt-btn:hover{background:#334155;}
.feedback{min-height:24px;margin-bottom:20px;font-size:1rem;}
.next-btn{padding:10px 20px;border-radius:12px;border:0;background:#38bdf8;color:#0f172a;cursor:pointer;font-size:1rem;}
.back-btn{background:#1e293b;color:white;padding:10px 20px;border:0;border-radius:12px;margin:15px;cursor:pointer;}
.subject-image{max-width:200px;border-radius:16px;margin:0 auto 20px auto;display:block;}

</style>
<link rel="icon" href="../../favicon.ico"/>

<script>
let questions = [];
let currentIndex = 0;
let answered = false;

async function loadQuestions(){
  try{
    const resp = await fetch('questions.json');
    questions = await resp.json();
    currentIndex = 0;
    showQuestion();
  }catch(e){
    console.error('Errore nel caricamento delle domande', e);
  }
}

function showQuestion(){
  if(!questions || questions.length===0) return;
  const q = questions[currentIndex];
  document.getElementById("question-text").innerText = q.q;
  const buttons = document.querySelectorAll(".opt-btn");
  for(let i=0;i<buttons.length;i++){
    if(q.options[i] !== undefined){
      buttons[i].style.display = "block";
      buttons[i].innerText = q.options[i];
      buttons[i].style.background = "#1e293b";
    }else{
      buttons[i].style.display = "none";
    }
  }
  document.getElementById("feedback").innerText = "";
  answered = false;
}

function selectOption(index){
  if(answered) return;
  const q = questions[currentIndex];
  const buttons = document.querySelectorAll(".opt-btn");
  if(index === q.correct){
    document.getElementById("feedback").innerText = "Corretto!";
    buttons[index].style.background = "#16a34a";
  }else{
    document.getElementById("feedback").innerText = "Risposta sbagliata.";
    buttons[index].style.background = "#b91c1c";
    if(q.correct >=0 && q.correct < buttons.length){
      buttons[q.correct].style.background = "#16a34a";
    }
  }
  answered = true;
}

function nextQuestion(){
  if(!questions || questions.length===0) return;
  currentIndex = (currentIndex + 1) % questions.length;
  showQuestion();
}

window.addEventListener("load", loadQuestions);
</script>

</head>
<body>
<button class="back-btn" onclick="history.back()">â¬… Indietro</button>
<h2>Logica</h2>
<img src="../images/LOGICA.png" alt="Logica" class="subject-image"/>
<div class="quiz-container">
  <div id="question-text" class="question"></div>
  <div class="options">
    <button class="opt-btn" onclick="selectOption(0)"></button>
    <button class="opt-btn" onclick="selectOption(1)"></button>
    <button class="opt-btn" onclick="selectOption(2)"></button>
    <button class="opt-btn" onclick="selectOption(3)"></button>
  </div>
  <div id="feedback" class="feedback"></div>
  <button class="next-btn" onclick="nextQuestion()">Domanda successiva</button>
</div>
</body>
</html>
